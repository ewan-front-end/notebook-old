<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="app">
        <span>{{message.text}}</span>
        <span>{{message.data.a}}</span>
    </div>
    
</body>
</html>
<script type="module">
    import {regexpPresetParse, PRESET_CSS} from './docs/.usage/scripts/utils/regexp-preset.es.js'
    var block = `
    # 标题文本
    [#] 反相标题
    **局部加粗**
    // 单行注释给你
    /* 多行注释 */

    行样式[{color:#f00}(bd)]  
行样式[(bd)]
行样式[(bd){color:#f00}] 
行样式[] 
    [盒样式{color:#f00}(bd)]
    [盒样式(bd)]
    [盒样式]
    [盒样式{color:#f00}]
    [盒样式(bd){color:#f00}]

    Description Of Detail ▾
    ↧Detail Content↥
    `
    
    
    
    
    const REG_BOX_STYLE_STR = regexpPresetParse([{BOX_FORMAT: [`\\[`, {CONTENT: `[^\\{\\}\\[\\]\\(\\)]+`}, PRESET_CSS, `\\]` ]}])
    const REG_BOX_STYLE = new RegExp(REG_BOX_STYLE_STR.value, 'gm') 
    let boxStyleMatch
    while ((boxStyleMatch = REG_BOX_STYLE.exec(block)) !== null) {   
        let {BOX_FORMAT, CONTENT, CSS, CSS_1, CSS_2} = boxStyleMatch.groups, cssStr = ''
        if (CSS_1) {
            console.log('===', CSS_1.includes('{'), CSS_1);
            let text = CSS_1.substr(1, CSS_1.length - 2)
            cssStr += CSS_1.includes('{') ? ` style="${text}"` : ` class="${text}"`
        }
        if (CSS_2) {
            let text = CSS_2.substr(1, CSS_2.length - 2)
            cssStr += CSS_2.includes('{') ? ` style="${text}"` : ` class="${text}"`
        }
        block = block.replace(BOX_FORMAT, `<span${cssStr}>${CONTENT}</span>`)
    }

   
    
    console.log(block);
</script>
const {Element, Stage, Scene, scenes, Layer, Group, Rect, Circle} = require('./main')
let stage = new Stage() 
var scene = new Scene('SCENE_1')
var layer = new Layer('LAYER_1')
var group = new Group('GROUP_1')
var rect = new Rect('RECT_1')
var circle = new Circle('CIRCLE_1')   

//console.error = function(){}
        
var expect = require('chai').expect 
describe('容器类', function() {
    describe('舞台(Stage)', function() {
        it('stage是Element的实例', function() {expect(stage).to.be.an.instanceof(Element)})
        it('stage实例有addChild方法', function() {expect(stage.addChild).to.exist})
        it('stage实例没有appendTo方法', function() {expect(stage.appendTo).to.not.exist})

        it('stage添加stage 越权添加', function() {expect(stage.addChild(stage)).to.have.property('type', 2)})
        it('stage添加scene 成功', function() {expect(stage.addChild(scene)).to.have.property('state', 0)})
        it('stage添加layer 指定添加类型之外', function() {expect(stage.addChild(layer)).to.have.property('type', 4)})
        it('stage添加group 指定添加类型之外', function() {expect(stage.addChild(group)).to.have.property('type', 4)})
        it('stage添加rect 指定添加类型之外', function() {expect(stage.addChild(rect)).to.have.property('type', 4)})
        it('stage添加circle 指定添加类型之外', function() {expect(stage.addChild(circle)).to.have.property('type', 4)})
    })
    describe('场景(Scene)', function() {
        it('scene是Element的实例', function() {expect(scene).to.be.an.instanceof(Element)})
        it('scene实例有addChild方法', function() {expect(scene.addChild).to.exist})
        it('scene实例有appendTo方法', function() {expect(scene.appendTo).to.exist})

        it('scene添加stage 越权添加', function() {expect(scene.addChild(stage)).to.have.property('type', 2)})
        it('scene添加scene 越权添加', function() {expect(scene.addChild(scene)).to.have.property('type', 2)})
        it('scene添加layer 成功', function() {expect(scene.addChild(layer)).to.have.property('state', 0)})
        it('scene添加group 成功', function() {expect(scene.addChild(group)).to.have.property('state', 0)})
        it('scene添加rect 成功', function() {expect(scene.addChild(rect)).to.have.property('state', 0)})
        it('scene添加circle 成功', function() {expect(scene.addChild(circle)).to.have.property('state', 0)})

        it('scene添加到stage 重复添加', function() {expect(scene.appendTo(stage)).to.have.property('type', 3)})
        it('scene添加到scene 越权添加', function() {expect(scene.appendTo(scene)).to.have.property('type', 2)})
        it('scene添加到layer 越权添加', function() {expect(scene.appendTo(layer)).to.have.property('type', 2)})
        it('scene添加到group 越权添加', function() {expect(scene.appendTo(group)).to.have.property('type', 2)})
        it('scene添加到rect 越权添加', function() {expect(scene.appendTo(rect)).to.have.property('type', 2)})
        it('scene添加到circle 越权添加', function() {expect(scene.appendTo(circle)).to.have.property('type', 2)})
    })
    describe('图层(Layer)', function() {
        it('layer是Element的实例', function() {expect(layer).to.be.an.instanceof(Element)})
        it('layer实例有addChild方法', function() {expect(layer.addChild).to.exist})
        it('layer实例有appendTo方法', function() {expect(layer.appendTo).to.exist})

        it('layer添加stage 越权添加', function() {expect(layer.addChild(stage)).to.have.property('type', 2)})
        it('layer添加scene 越权添加', function() {expect(layer.addChild(scene)).to.have.property('type', 2)})
        it('layer添加layer 越权添加', function() {expect(layer.addChild(layer)).to.have.property('type', 2)})
        it('layer添加group 子元素已添加过其它容器', function() {expect(layer.addChild(group)).to.have.property('type', 6)})
        it('layer强行添加group 成功', function() {expect(layer.addChild(group,true)).to.have.property('state', 0)})
        it('layer添加rect 子元素已添加过其它容器', function() {expect(layer.addChild(rect)).to.have.property('type', 6)})
        it('layer强行添加rect 成功', function() {expect(layer.addChild(rect, true)).to.have.property('state', 0)})
        it('layer添加circle 子元素已添加过其它容器', function() {expect(layer.addChild(circle)).to.have.property('type', 6)})
        it('layer强行添加circle 成功', function() {expect(layer.addChild(circle, true)).to.have.property('state', 0)})

        it('layer添加到stage 指定添加类型之外', function() {expect(layer.appendTo(stage)).to.have.property('type', 4)})
        it('layer添加到scene 已经存在', function() {expect(layer.appendTo(scene)).to.have.property('type', 3)})
        it('layer添加到layer 越权添加', function() {expect(layer.appendTo(layer)).to.have.property('type', 2)})
        it('layer添加到group 越权添加', function() {expect(layer.appendTo(group)).to.have.property('type', 2)})
        it('layer添加到rect 越权添加', function() {expect(layer.appendTo(rect)).to.have.property('type', 2)})
        it('layer添加到circle 越权添加', function() {expect(layer.appendTo(circle)).to.have.property('type', 2)})
    })
    describe('群组(Group)', function() {
        it('group是Element的实例', function() {expect(group).to.be.an.instanceof(Element)})
        it('group实例有addChild方法', function() {expect(group.addChild).to.exist})
        it('group实例有appendTo方法', function() {expect(group.appendTo).to.exist})

        it('group添加stage 越权添加', function() {expect(group.addChild(stage)).to.have.property('type', 2)})
        it('group添加scene 越权添加', function() {expect(group.addChild(scene)).to.have.property('type', 2)})
        it('group添加layer 越权添加', function() {expect(group.addChild(layer)).to.have.property('type', 2)})
        it('group添加group 越权添加', function() {expect(group.addChild(group)).to.have.property('type', 2)})
        it('group添加rect 子元素已添加过其它容器', function() {expect(group.addChild(rect)).to.have.property('type', 6)})
        it('group强行添加rect 成功', function() {expect(group.addChild(rect, true)).to.have.property('state', 0)})
        it('group添加circle 子元素已添加过其它容器', function() {expect(group.addChild(circle)).to.have.property('type', 6)})
        it('group强行添加circle 成功', function() {expect(group.addChild(circle, true)).to.have.property('state', 0)})

        it('group添加到stage 指定添加类型之外', function() {expect(group.appendTo(stage)).to.have.property('type', 4)})
        it('group添加到scene 不能添加到第二个容器', function() {expect(group.appendTo(scene)).to.have.property('type', 6)})
        it('group添加到layer 已经存在', function() {expect(group.appendTo(layer)).to.have.property('type', 3)})
        it('group强行添加到layer 已经存在', function() {expect(group.appendTo(layer, true)).to.have.property('type', 3)})
        it('group添加到group 越权添加', function() {expect(group.appendTo(group)).to.have.property('type', 2)})
        it('group添加到rect 越权添加', function() {expect(group.appendTo(rect)).to.have.property('type', 2)})
        it('group添加到circle 越权添加', function() {expect(group.appendTo(circle)).to.have.property('type', 2)})
    })
    describe('矩形(Rect)', function() {
        it('rect是Element的实例', function() {expect(rect).to.be.an.instanceof(Element)})
        it('rect实例没有addChild方法', function() {expect(rect.addChild).to.not.exist})
        it('rect实例有appendTo方法', function() {expect(rect.appendTo).to.exist})

        it('rect添加到stage 指定添加类型之外', function() {expect(rect.appendTo(stage)).to.have.property('type', 4)})
        it('rect添加到scene 不能添加到第二个容器', function() {expect(rect.appendTo(scene)).to.have.property('type', 6)})
        it('rect添加到layer 不能添加到第二个容器', function() {expect(rect.appendTo(layer)).to.have.property('type', 6)})
        it('rect添加到group 已经存在', function() {expect(rect.appendTo(group)).to.have.property('type', 3)})
        it('rect添加到rect 越权添加', function() {expect(rect.appendTo(rect)).to.have.property('type', 2)})
        it('rect添加到circle 越权添加', function() {expect(rect.appendTo(circle)).to.have.property('type', 2)})
    })
    describe('圆形(Circle)', function() {
        it('circle是Element的实例', function() {expect(circle).to.be.an.instanceof(Element)})
        it('circle实例没有addChild方法', function() {expect(circle.addChild).to.not.exist})
        it('circle实例有appendTo方法', function() {expect(circle.appendTo).to.exist})

        it('circle添加到stage 指定添加类型之外', function() {expect(circle.appendTo(stage)).to.have.property('type', 4)})
        it('circle添加到scene 不能添加到第二个容器', function() {expect(circle.appendTo(scene)).to.have.property('type', 6)})
        it('circle添加到layer 不能添加到第二个容器', function() {expect(circle.appendTo(layer)).to.have.property('type', 6)})
        it('circle添加到group 已经存在', function() {expect(circle.appendTo(group)).to.have.property('type', 3)})
        it('circle添加到rect 越权添加', function() {expect(circle.appendTo(rect)).to.have.property('type', 2)})
        it('circle添加到circle 越权添加', function() {expect(circle.appendTo(circle)).to.have.property('type', 2)})
    })
})
